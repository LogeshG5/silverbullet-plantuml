var Rt=Object.create;var ot=Object.defineProperty;var Dt=Object.getOwnPropertyDescriptor;var Ot=Object.getOwnPropertyNames;var Nt=Object.getPrototypeOf,Ft=Object.prototype.hasOwnProperty;var Ie=(v=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(v,{get:(y,H)=>(typeof require<"u"?require:y)[H]}):v)(function(v){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+v+'" is not supported')});var ft=(v,y)=>()=>(y||v((y={exports:{}}).exports,y),y.exports),Ve=(v,y)=>{for(var H in y)ot(v,H,{get:y[H],enumerable:!0})},Mt=(v,y,H,k)=>{if(y&&typeof y=="object"||typeof y=="function")for(let T of Ot(y))!Ft.call(v,T)&&T!==H&&ot(v,T,{get:()=>y[T],enumerable:!(k=Dt(y,T))||k.enumerable});return v};var Bt=(v,y,H)=>(H=v!=null?Rt(Nt(v)):{},Mt(y||!v||!v.__esModule?ot(H,"default",{value:v,enumerable:!0}):H,v));var yt=ft((wt,ht)=>{(function(v){if(typeof wt=="object"&&typeof ht<"u")ht.exports=v();else if(typeof define=="function"&&define.amd)define([],v);else{var y;typeof window<"u"?y=window:typeof global<"u"?y=global:typeof self<"u"?y=self:y=this,y.plantumlEncoder=v()}})(function(){var v,y,H;return function(){function k(T,m,g){function z(l,c){if(!m[l]){if(!T[l]){var f=typeof Ie=="function"&&Ie;if(!c&&f)return f(l,!0);if(S)return S(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var a=m[l]={exports:{}};T[l][0].call(a.exports,function(x){var P=T[l][1][x];return z(P||x)},a,a.exports,k,T,m,g)}return m[l].exports}for(var S=typeof Ie=="function"&&Ie,u=0;u<g.length;u++)z(g[u]);return z}return k}()({1:[function(k,T,m){"use strict";var g=k("pako/lib/deflate.js");T.exports=function(z){return g.deflateRaw(z,{level:9,to:"string"})}},{"pako/lib/deflate.js":4}],2:[function(k,T,m){"use strict";function g(S){return S<10?String.fromCharCode(48+S):(S-=10,S<26?String.fromCharCode(65+S):(S-=26,S<26?String.fromCharCode(97+S):(S-=26,S===0?"-":S===1?"_":"?")))}function z(S,u,l){var c=S>>2,f=(S&3)<<4|u>>4,h=(u&15)<<2|l>>6,a=l&63,x="";return x+=g(c&63),x+=g(f&63),x+=g(h&63),x+=g(a&63),x}T.exports=function(S){for(var u="",l=0;l<S.length;l+=3)l+2===S.length?u+=z(S.charCodeAt(l),S.charCodeAt(l+1),0):l+1===S.length?u+=z(S.charCodeAt(l),0,0):u+=z(S.charCodeAt(l),S.charCodeAt(l+1),S.charCodeAt(l+2));return u}},{}],3:[function(k,T,m){"use strict";var g=k("./deflate"),z=k("./encode64");T.exports.encode=function(S){var u=g(S);return z(u)}},{"./deflate":1,"./encode64":2}],4:[function(k,T,m){"use strict";var g=k("./zlib/deflate"),z=k("./utils/common"),S=k("./utils/strings"),u=k("./zlib/messages"),l=k("./zlib/zstream"),c=Object.prototype.toString,f=0,h=4,a=0,x=1,P=2,R=-1,A=0,C=8;function K($){if(!(this instanceof K))return new K($);this.options=z.assign({level:R,method:C,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},$||{});var M=this.options;M.raw&&M.windowBits>0?M.windowBits=-M.windowBits:M.gzip&&M.windowBits>0&&M.windowBits<16&&(M.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var Y=g.deflateInit2(this.strm,M.level,M.method,M.windowBits,M.memLevel,M.strategy);if(Y!==a)throw new Error(u[Y]);if(M.header&&g.deflateSetHeader(this.strm,M.header),M.dictionary){var X;if(typeof M.dictionary=="string"?X=S.string2buf(M.dictionary):c.call(M.dictionary)==="[object ArrayBuffer]"?X=new Uint8Array(M.dictionary):X=M.dictionary,Y=g.deflateSetDictionary(this.strm,X),Y!==a)throw new Error(u[Y]);this._dict_set=!0}}K.prototype.push=function($,M){var Y=this.strm,X=this.options.chunkSize,I,D;if(this.ended)return!1;D=M===~~M?M:M===!0?h:f,typeof $=="string"?Y.input=S.string2buf($):c.call($)==="[object ArrayBuffer]"?Y.input=new Uint8Array($):Y.input=$,Y.next_in=0,Y.avail_in=Y.input.length;do{if(Y.avail_out===0&&(Y.output=new z.Buf8(X),Y.next_out=0,Y.avail_out=X),I=g.deflate(Y,D),I!==x&&I!==a)return this.onEnd(I),this.ended=!0,!1;(Y.avail_out===0||Y.avail_in===0&&(D===h||D===P))&&(this.options.to==="string"?this.onData(S.buf2binstring(z.shrinkBuf(Y.output,Y.next_out))):this.onData(z.shrinkBuf(Y.output,Y.next_out)))}while((Y.avail_in>0||Y.avail_out===0)&&I!==x);return D===h?(I=g.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===a):(D===P&&(this.onEnd(a),Y.avail_out=0),!0)},K.prototype.onData=function($){this.chunks.push($)},K.prototype.onEnd=function($){$===a&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=z.flattenChunks(this.chunks)),this.chunks=[],this.err=$,this.msg=this.strm.msg};function le($,M){var Y=new K(M);if(Y.push($,!0),Y.err)throw Y.msg||u[Y.err];return Y.result}function L($,M){return M=M||{},M.raw=!0,le($,M)}function Z($,M){return M=M||{},M.gzip=!0,le($,M)}m.Deflate=K,m.deflate=le,m.deflateRaw=L,m.gzip=Z},{"./utils/common":5,"./utils/strings":6,"./zlib/deflate":9,"./zlib/messages":10,"./zlib/zstream":12}],5:[function(k,T,m){"use strict";var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function z(l,c){return Object.prototype.hasOwnProperty.call(l,c)}m.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)z(f,h)&&(l[h]=f[h])}}return l},m.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var S={arraySet:function(l,c,f,h,a){if(c.subarray&&l.subarray){l.set(c.subarray(f,f+h),a);return}for(var x=0;x<h;x++)l[a+x]=c[f+x]},flattenChunks:function(l){var c,f,h,a,x,P;for(h=0,c=0,f=l.length;c<f;c++)h+=l[c].length;for(P=new Uint8Array(h),a=0,c=0,f=l.length;c<f;c++)x=l[c],P.set(x,a),a+=x.length;return P}},u={arraySet:function(l,c,f,h,a){for(var x=0;x<h;x++)l[a+x]=c[f+x]},flattenChunks:function(l){return[].concat.apply([],l)}};m.setTyped=function(l){l?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,S)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,u))},m.setTyped(g)},{}],6:[function(k,T,m){"use strict";var g=k("./common"),z=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch{z=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{S=!1}for(var u=new g.Buf8(256),l=0;l<256;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,m.string2buf=function(f){var h,a,x,P,R,A=f.length,C=0;for(P=0;P<A;P++)a=f.charCodeAt(P),(a&64512)===55296&&P+1<A&&(x=f.charCodeAt(P+1),(x&64512)===56320&&(a=65536+(a-55296<<10)+(x-56320),P++)),C+=a<128?1:a<2048?2:a<65536?3:4;for(h=new g.Buf8(C),R=0,P=0;R<C;P++)a=f.charCodeAt(P),(a&64512)===55296&&P+1<A&&(x=f.charCodeAt(P+1),(x&64512)===56320&&(a=65536+(a-55296<<10)+(x-56320),P++)),a<128?h[R++]=a:a<2048?(h[R++]=192|a>>>6,h[R++]=128|a&63):a<65536?(h[R++]=224|a>>>12,h[R++]=128|a>>>6&63,h[R++]=128|a&63):(h[R++]=240|a>>>18,h[R++]=128|a>>>12&63,h[R++]=128|a>>>6&63,h[R++]=128|a&63);return h};function c(f,h){if(h<65534&&(f.subarray&&S||!f.subarray&&z))return String.fromCharCode.apply(null,g.shrinkBuf(f,h));for(var a="",x=0;x<h;x++)a+=String.fromCharCode(f[x]);return a}m.buf2binstring=function(f){return c(f,f.length)},m.binstring2buf=function(f){for(var h=new g.Buf8(f.length),a=0,x=h.length;a<x;a++)h[a]=f.charCodeAt(a);return h},m.buf2string=function(f,h){var a,x,P,R,A=h||f.length,C=new Array(A*2);for(x=0,a=0;a<A;){if(P=f[a++],P<128){C[x++]=P;continue}if(R=u[P],R>4){C[x++]=65533,a+=R-1;continue}for(P&=R===2?31:R===3?15:7;R>1&&a<A;)P=P<<6|f[a++]&63,R--;if(R>1){C[x++]=65533;continue}P<65536?C[x++]=P:(P-=65536,C[x++]=55296|P>>10&1023,C[x++]=56320|P&1023)}return c(C,x)},m.utf8border=function(f,h){var a;for(h=h||f.length,h>f.length&&(h=f.length),a=h-1;a>=0&&(f[a]&192)===128;)a--;return a<0||a===0?h:a+u[f[a]]>h?a:h}},{"./common":5}],7:[function(k,T,m){"use strict";function g(z,S,u,l){for(var c=z&65535|0,f=z>>>16&65535|0,h=0;u!==0;){h=u>2e3?2e3:u,u-=h;do c=c+S[l++]|0,f=f+c|0;while(--h);c%=65521,f%=65521}return c|f<<16|0}T.exports=g},{}],8:[function(k,T,m){"use strict";function g(){for(var u,l=[],c=0;c<256;c++){u=c;for(var f=0;f<8;f++)u=u&1?3988292384^u>>>1:u>>>1;l[c]=u}return l}var z=g();function S(u,l,c,f){var h=z,a=f+c;u^=-1;for(var x=f;x<a;x++)u=u>>>8^h[(u^l[x])&255];return u^-1}T.exports=S},{}],9:[function(k,T,m){"use strict";var g=k("../utils/common"),z=k("./trees"),S=k("./adler32"),u=k("./crc32"),l=k("./messages"),c=0,f=1,h=3,a=4,x=5,P=0,R=1,A=-2,C=-3,K=-5,le=-1,L=1,Z=2,$=3,M=4,Y=0,X=2,I=8,D=9,Q=15,te=8,V=29,ne=256,fe=ne+1+V,j=30,ie=19,_e=2*fe+1,we=15,G=3,ve=258,se=ve+G+1,ze=32,Ae=42,xe=69,de=73,Se=91,me=103,ae=113,ce=666,re=1,ye=2,Re=3,De=4,oe=3;function Ee(e,d){return e.msg=l[d],d}function We(e){return(e<<1)-(e>4?9:0)}function Oe(e){for(var d=e.length;--d>=0;)e[d]=0}function Ce(e){var d=e.state,_=d.pending;_>e.avail_out&&(_=e.avail_out),_!==0&&(g.arraySet(e.output,d.pending_buf,d.pending_out,_,e.next_out),e.next_out+=_,d.pending_out+=_,e.total_out+=_,e.avail_out-=_,d.pending-=_,d.pending===0&&(d.pending_out=0))}function ue(e,d){z._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,d),e.block_start=e.strstart,Ce(e.strm)}function q(e,d){e.pending_buf[e.pending++]=d}function Ne(e,d){e.pending_buf[e.pending++]=d>>>8&255,e.pending_buf[e.pending++]=d&255}function Ge(e,d,_,r){var i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,g.arraySet(d,e.input,e.next_in,i,_),e.state.wrap===1?e.adler=S(e.adler,d,i,_):e.state.wrap===2&&(e.adler=u(e.adler,d,i,_)),e.next_in+=i,e.total_in+=i,i)}function Ke(e,d){var _=e.max_chain_length,r=e.strstart,i,s,B=e.prev_length,O=e.nice_match,F=e.strstart>e.w_size-se?e.strstart-(e.w_size-se):0,J=e.window,Ue=e.w_mask,he=e.prev,ee=e.strstart+ve,ge=J[r+B-1],Pe=J[r+B];e.prev_length>=e.good_match&&(_>>=2),O>e.lookahead&&(O=e.lookahead);do if(i=d,!(J[i+B]!==Pe||J[i+B-1]!==ge||J[i]!==J[r]||J[++i]!==J[r+1])){r+=2,i++;do;while(J[++r]===J[++i]&&J[++r]===J[++i]&&J[++r]===J[++i]&&J[++r]===J[++i]&&J[++r]===J[++i]&&J[++r]===J[++i]&&J[++r]===J[++i]&&J[++r]===J[++i]&&r<ee);if(s=ve-(ee-r),r=ee-ve,s>B){if(e.match_start=d,B=s,s>=O)break;ge=J[r+B-1],Pe=J[r+B]}}while((d=he[d&Ue])>F&&--_!==0);return B<=e.lookahead?B:e.lookahead}function Fe(e){var d=e.w_size,_,r,i,s,B;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-se)){g.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,r=e.hash_size,_=r;do i=e.head[--_],e.head[_]=i>=d?i-d:0;while(--r);r=d,_=r;do i=e.prev[--_],e.prev[_]=i>=d?i-d:0;while(--r);s+=d}if(e.strm.avail_in===0)break;if(r=Ge(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=G)for(B=e.strstart-e.insert,e.ins_h=e.window[B],e.ins_h=(e.ins_h<<e.hash_shift^e.window[B+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[B+G-1])&e.hash_mask,e.prev[B&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=B,B++,e.insert--,!(e.lookahead+e.insert<G)););}while(e.lookahead<se&&e.strm.avail_in!==0)}function Xe(e,d){var _=65535;for(_>e.pending_buf_size-5&&(_=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Fe(e),e.lookahead===0&&d===c)return re;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+_;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,ue(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-se&&(ue(e,!1),e.strm.avail_out===0))return re}return e.insert=0,d===a?(ue(e,!0),e.strm.avail_out===0?Re:De):(e.strstart>e.block_start&&(ue(e,!1),e.strm.avail_out===0),re)}function Ye(e,d){for(var _,r;;){if(e.lookahead<se){if(Fe(e),e.lookahead<se&&d===c)return re;if(e.lookahead===0)break}if(_=0,e.lookahead>=G&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,_=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),_!==0&&e.strstart-_<=e.w_size-se&&(e.match_length=Ke(e,_)),e.match_length>=G)if(r=z._tr_tally(e,e.strstart-e.match_start,e.match_length-G),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=G){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,_=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=z._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ue(e,!1),e.strm.avail_out===0))return re}return e.insert=e.strstart<G-1?e.strstart:G-1,d===a?(ue(e,!0),e.strm.avail_out===0?Re:De):e.last_lit&&(ue(e,!1),e.strm.avail_out===0)?re:ye}function Be(e,d){for(var _,r,i;;){if(e.lookahead<se){if(Fe(e),e.lookahead<se&&d===c)return re;if(e.lookahead===0)break}if(_=0,e.lookahead>=G&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,_=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=G-1,_!==0&&e.prev_length<e.max_lazy_match&&e.strstart-_<=e.w_size-se&&(e.match_length=Ke(e,_),e.match_length<=5&&(e.strategy===L||e.match_length===G&&e.strstart-e.match_start>4096)&&(e.match_length=G-1)),e.prev_length>=G&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-G,r=z._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-G),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,_=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=G-1,e.strstart++,r&&(ue(e,!1),e.strm.avail_out===0))return re}else if(e.match_available){if(r=z._tr_tally(e,0,e.window[e.strstart-1]),r&&ue(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return re}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=z._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<G-1?e.strstart:G-1,d===a?(ue(e,!0),e.strm.avail_out===0?Re:De):e.last_lit&&(ue(e,!1),e.strm.avail_out===0)?re:ye}function $e(e,d){for(var _,r,i,s,B=e.window;;){if(e.lookahead<=ve){if(Fe(e),e.lookahead<=ve&&d===c)return re;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=G&&e.strstart>0&&(i=e.strstart-1,r=B[i],r===B[++i]&&r===B[++i]&&r===B[++i])){s=e.strstart+ve;do;while(r===B[++i]&&r===B[++i]&&r===B[++i]&&r===B[++i]&&r===B[++i]&&r===B[++i]&&r===B[++i]&&r===B[++i]&&i<s);e.match_length=ve-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=G?(_=z._tr_tally(e,1,e.match_length-G),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(_=z._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),_&&(ue(e,!1),e.strm.avail_out===0))return re}return e.insert=0,d===a?(ue(e,!0),e.strm.avail_out===0?Re:De):e.last_lit&&(ue(e,!1),e.strm.avail_out===0)?re:ye}function je(e,d){for(var _;;){if(e.lookahead===0&&(Fe(e),e.lookahead===0)){if(d===c)return re;break}if(e.match_length=0,_=z._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,_&&(ue(e,!1),e.strm.avail_out===0))return re}return e.insert=0,d===a?(ue(e,!0),e.strm.avail_out===0?Re:De):e.last_lit&&(ue(e,!1),e.strm.avail_out===0)?re:ye}function ke(e,d,_,r,i){this.good_length=e,this.max_lazy=d,this.nice_length=_,this.max_chain=r,this.func=i}var Ze;Ze=[new ke(0,0,0,0,Xe),new ke(4,4,8,4,Ye),new ke(4,5,16,8,Ye),new ke(4,6,32,32,Ye),new ke(4,4,16,16,Be),new ke(8,16,32,32,Be),new ke(8,16,128,128,Be),new ke(8,32,128,256,Be),new ke(32,128,258,1024,Be),new ke(32,258,258,4096,Be)];function Qe(e){e.window_size=2*e.w_size,Oe(e.head),e.max_lazy_match=Ze[e.level].max_lazy,e.good_match=Ze[e.level].good_length,e.nice_match=Ze[e.level].nice_length,e.max_chain_length=Ze[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=G-1,e.match_available=0,e.ins_h=0}function n(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new g.Buf16(_e*2),this.dyn_dtree=new g.Buf16((2*j+1)*2),this.bl_tree=new g.Buf16((2*ie+1)*2),Oe(this.dyn_ltree),Oe(this.dyn_dtree),Oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new g.Buf16(we+1),this.heap=new g.Buf16(2*fe+1),Oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new g.Buf16(2*fe+1),Oe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(e){var d;return!e||!e.state?Ee(e,A):(e.total_in=e.total_out=0,e.data_type=X,d=e.state,d.pending=0,d.pending_out=0,d.wrap<0&&(d.wrap=-d.wrap),d.status=d.wrap?Ae:ae,e.adler=d.wrap===2?0:1,d.last_flush=c,z._tr_init(d),P)}function E(e){var d=b(e);return d===P&&Qe(e.state),d}function N(e,d){return!e||!e.state||e.state.wrap!==2?A:(e.state.gzhead=d,P)}function o(e,d,_,r,i,s){if(!e)return A;var B=1;if(d===le&&(d=6),r<0?(B=0,r=-r):r>15&&(B=2,r-=16),i<1||i>D||_!==I||r<8||r>15||d<0||d>9||s<0||s>M)return Ee(e,A);r===8&&(r=9);var O=new n;return e.state=O,O.strm=e,O.wrap=B,O.gzhead=null,O.w_bits=r,O.w_size=1<<O.w_bits,O.w_mask=O.w_size-1,O.hash_bits=i+7,O.hash_size=1<<O.hash_bits,O.hash_mask=O.hash_size-1,O.hash_shift=~~((O.hash_bits+G-1)/G),O.window=new g.Buf8(O.w_size*2),O.head=new g.Buf16(O.hash_size),O.prev=new g.Buf16(O.w_size),O.lit_bufsize=1<<i+6,O.pending_buf_size=O.lit_bufsize*4,O.pending_buf=new g.Buf8(O.pending_buf_size),O.d_buf=1*O.lit_bufsize,O.l_buf=3*O.lit_bufsize,O.level=d,O.strategy=s,O.method=_,E(e)}function p(e,d){return o(e,d,I,Q,te,Y)}function t(e,d){var _,r,i,s;if(!e||!e.state||d>x||d<0)return e?Ee(e,A):A;if(r=e.state,!e.output||!e.input&&e.avail_in!==0||r.status===ce&&d!==a)return Ee(e,e.avail_out===0?K:A);if(r.strm=e,_=r.last_flush,r.last_flush=d,r.status===Ae)if(r.wrap===2)e.adler=0,q(r,31),q(r,139),q(r,8),r.gzhead?(q(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),q(r,r.gzhead.time&255),q(r,r.gzhead.time>>8&255),q(r,r.gzhead.time>>16&255),q(r,r.gzhead.time>>24&255),q(r,r.level===9?2:r.strategy>=Z||r.level<2?4:0),q(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(q(r,r.gzhead.extra.length&255),q(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=u(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=xe):(q(r,0),q(r,0),q(r,0),q(r,0),q(r,0),q(r,r.level===9?2:r.strategy>=Z||r.level<2?4:0),q(r,oe),r.status=ae);else{var B=I+(r.w_bits-8<<4)<<8,O=-1;r.strategy>=Z||r.level<2?O=0:r.level<6?O=1:r.level===6?O=2:O=3,B|=O<<6,r.strstart!==0&&(B|=ze),B+=31-B%31,r.status=ae,Ne(r,B),r.strstart!==0&&(Ne(r,e.adler>>>16),Ne(r,e.adler&65535)),e.adler=1}if(r.status===xe)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=u(e.adler,r.pending_buf,r.pending-i,i)),Ce(e),i=r.pending,r.pending===r.pending_buf_size));)q(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=u(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=de)}else r.status=de;if(r.status===de)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=u(e.adler,r.pending_buf,r.pending-i,i)),Ce(e),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}r.gzindex<r.gzhead.name.length?s=r.gzhead.name.charCodeAt(r.gzindex++)&255:s=0,q(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=u(e.adler,r.pending_buf,r.pending-i,i)),s===0&&(r.gzindex=0,r.status=Se)}else r.status=Se;if(r.status===Se)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=u(e.adler,r.pending_buf,r.pending-i,i)),Ce(e),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}r.gzindex<r.gzhead.comment.length?s=r.gzhead.comment.charCodeAt(r.gzindex++)&255:s=0,q(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=u(e.adler,r.pending_buf,r.pending-i,i)),s===0&&(r.status=me)}else r.status=me;if(r.status===me&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Ce(e),r.pending+2<=r.pending_buf_size&&(q(r,e.adler&255),q(r,e.adler>>8&255),e.adler=0,r.status=ae)):r.status=ae),r.pending!==0){if(Ce(e),e.avail_out===0)return r.last_flush=-1,P}else if(e.avail_in===0&&We(d)<=We(_)&&d!==a)return Ee(e,K);if(r.status===ce&&e.avail_in!==0)return Ee(e,K);if(e.avail_in!==0||r.lookahead!==0||d!==c&&r.status!==ce){var F=r.strategy===Z?je(r,d):r.strategy===$?$e(r,d):Ze[r.level].func(r,d);if((F===Re||F===De)&&(r.status=ce),F===re||F===Re)return e.avail_out===0&&(r.last_flush=-1),P;if(F===ye&&(d===f?z._tr_align(r):d!==x&&(z._tr_stored_block(r,0,0,!1),d===h&&(Oe(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Ce(e),e.avail_out===0))return r.last_flush=-1,P}return d!==a?P:r.wrap<=0?R:(r.wrap===2?(q(r,e.adler&255),q(r,e.adler>>8&255),q(r,e.adler>>16&255),q(r,e.adler>>24&255),q(r,e.total_in&255),q(r,e.total_in>>8&255),q(r,e.total_in>>16&255),q(r,e.total_in>>24&255)):(Ne(r,e.adler>>>16),Ne(r,e.adler&65535)),Ce(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?P:R)}function w(e){var d;return!e||!e.state?A:(d=e.state.status,d!==Ae&&d!==xe&&d!==de&&d!==Se&&d!==me&&d!==ae&&d!==ce?Ee(e,A):(e.state=null,d===ae?Ee(e,C):P))}function W(e,d){var _=d.length,r,i,s,B,O,F,J,Ue;if(!e||!e.state||(r=e.state,B=r.wrap,B===2||B===1&&r.status!==Ae||r.lookahead))return A;for(B===1&&(e.adler=S(e.adler,d,_,0)),r.wrap=0,_>=r.w_size&&(B===0&&(Oe(r.head),r.strstart=0,r.block_start=0,r.insert=0),Ue=new g.Buf8(r.w_size),g.arraySet(Ue,d,_-r.w_size,r.w_size,0),d=Ue,_=r.w_size),O=e.avail_in,F=e.next_in,J=e.input,e.avail_in=_,e.next_in=0,e.input=d,Fe(r);r.lookahead>=G;){i=r.strstart,s=r.lookahead-(G-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+G-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--s);r.strstart=i,r.lookahead=G-1,Fe(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=G-1,r.match_available=0,e.next_in=F,e.input=J,e.avail_in=O,r.wrap=B,P}m.deflateInit=p,m.deflateInit2=o,m.deflateReset=E,m.deflateResetKeep=b,m.deflateSetHeader=N,m.deflate=t,m.deflateEnd=w,m.deflateSetDictionary=W,m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":5,"./adler32":7,"./crc32":8,"./messages":10,"./trees":11}],10:[function(k,T,m){"use strict";T.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(k,T,m){"use strict";var g=k("../utils/common"),z=4,S=0,u=1,l=2;function c(n){for(var b=n.length;--b>=0;)n[b]=0}var f=0,h=1,a=2,x=3,P=258,R=29,A=256,C=A+1+R,K=30,le=19,L=2*C+1,Z=15,$=16,M=7,Y=256,X=16,I=17,D=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=512,j=new Array((C+2)*2);c(j);var ie=new Array(K*2);c(ie);var _e=new Array(fe);c(_e);var we=new Array(P-x+1);c(we);var G=new Array(R);c(G);var ve=new Array(K);c(ve);function se(n,b,E,N,o){this.static_tree=n,this.extra_bits=b,this.extra_base=E,this.elems=N,this.max_length=o,this.has_stree=n&&n.length}var ze,Ae,xe;function de(n,b){this.dyn_tree=n,this.max_code=0,this.stat_desc=b}function Se(n){return n<256?_e[n]:_e[256+(n>>>7)]}function me(n,b){n.pending_buf[n.pending++]=b&255,n.pending_buf[n.pending++]=b>>>8&255}function ae(n,b,E){n.bi_valid>$-E?(n.bi_buf|=b<<n.bi_valid&65535,me(n,n.bi_buf),n.bi_buf=b>>$-n.bi_valid,n.bi_valid+=E-$):(n.bi_buf|=b<<n.bi_valid&65535,n.bi_valid+=E)}function ce(n,b,E){ae(n,E[b*2],E[b*2+1])}function re(n,b){var E=0;do E|=n&1,n>>>=1,E<<=1;while(--b>0);return E>>>1}function ye(n){n.bi_valid===16?(me(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)}function Re(n,b){var E=b.dyn_tree,N=b.max_code,o=b.stat_desc.static_tree,p=b.stat_desc.has_stree,t=b.stat_desc.extra_bits,w=b.stat_desc.extra_base,W=b.stat_desc.max_length,e,d,_,r,i,s,B=0;for(r=0;r<=Z;r++)n.bl_count[r]=0;for(E[n.heap[n.heap_max]*2+1]=0,e=n.heap_max+1;e<L;e++)d=n.heap[e],r=E[E[d*2+1]*2+1]+1,r>W&&(r=W,B++),E[d*2+1]=r,!(d>N)&&(n.bl_count[r]++,i=0,d>=w&&(i=t[d-w]),s=E[d*2],n.opt_len+=s*(r+i),p&&(n.static_len+=s*(o[d*2+1]+i)));if(B!==0){do{for(r=W-1;n.bl_count[r]===0;)r--;n.bl_count[r]--,n.bl_count[r+1]+=2,n.bl_count[W]--,B-=2}while(B>0);for(r=W;r!==0;r--)for(d=n.bl_count[r];d!==0;)_=n.heap[--e],!(_>N)&&(E[_*2+1]!==r&&(n.opt_len+=(r-E[_*2+1])*E[_*2],E[_*2+1]=r),d--)}}function De(n,b,E){var N=new Array(Z+1),o=0,p,t;for(p=1;p<=Z;p++)N[p]=o=o+E[p-1]<<1;for(t=0;t<=b;t++){var w=n[t*2+1];w!==0&&(n[t*2]=re(N[w]++,w))}}function oe(){var n,b,E,N,o,p=new Array(Z+1);for(E=0,N=0;N<R-1;N++)for(G[N]=E,n=0;n<1<<Q[N];n++)we[E++]=N;for(we[E-1]=N,o=0,N=0;N<16;N++)for(ve[N]=o,n=0;n<1<<te[N];n++)_e[o++]=N;for(o>>=7;N<K;N++)for(ve[N]=o<<7,n=0;n<1<<te[N]-7;n++)_e[256+o++]=N;for(b=0;b<=Z;b++)p[b]=0;for(n=0;n<=143;)j[n*2+1]=8,n++,p[8]++;for(;n<=255;)j[n*2+1]=9,n++,p[9]++;for(;n<=279;)j[n*2+1]=7,n++,p[7]++;for(;n<=287;)j[n*2+1]=8,n++,p[8]++;for(De(j,C+1,p),n=0;n<K;n++)ie[n*2+1]=5,ie[n*2]=re(n,5);ze=new se(j,Q,A+1,C,Z),Ae=new se(ie,te,0,K,Z),xe=new se(new Array(0),V,0,le,M)}function Ee(n){var b;for(b=0;b<C;b++)n.dyn_ltree[b*2]=0;for(b=0;b<K;b++)n.dyn_dtree[b*2]=0;for(b=0;b<le;b++)n.bl_tree[b*2]=0;n.dyn_ltree[Y*2]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0}function We(n){n.bi_valid>8?me(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0}function Oe(n,b,E,N){We(n),N&&(me(n,E),me(n,~E)),g.arraySet(n.pending_buf,n.window,b,E,n.pending),n.pending+=E}function Ce(n,b,E,N){var o=b*2,p=E*2;return n[o]<n[p]||n[o]===n[p]&&N[b]<=N[E]}function ue(n,b,E){for(var N=n.heap[E],o=E<<1;o<=n.heap_len&&(o<n.heap_len&&Ce(b,n.heap[o+1],n.heap[o],n.depth)&&o++,!Ce(b,N,n.heap[o],n.depth));)n.heap[E]=n.heap[o],E=o,o<<=1;n.heap[E]=N}function q(n,b,E){var N,o,p=0,t,w;if(n.last_lit!==0)do N=n.pending_buf[n.d_buf+p*2]<<8|n.pending_buf[n.d_buf+p*2+1],o=n.pending_buf[n.l_buf+p],p++,N===0?ce(n,o,b):(t=we[o],ce(n,t+A+1,b),w=Q[t],w!==0&&(o-=G[t],ae(n,o,w)),N--,t=Se(N),ce(n,t,E),w=te[t],w!==0&&(N-=ve[t],ae(n,N,w)));while(p<n.last_lit);ce(n,Y,b)}function Ne(n,b){var E=b.dyn_tree,N=b.stat_desc.static_tree,o=b.stat_desc.has_stree,p=b.stat_desc.elems,t,w,W=-1,e;for(n.heap_len=0,n.heap_max=L,t=0;t<p;t++)E[t*2]!==0?(n.heap[++n.heap_len]=W=t,n.depth[t]=0):E[t*2+1]=0;for(;n.heap_len<2;)e=n.heap[++n.heap_len]=W<2?++W:0,E[e*2]=1,n.depth[e]=0,n.opt_len--,o&&(n.static_len-=N[e*2+1]);for(b.max_code=W,t=n.heap_len>>1;t>=1;t--)ue(n,E,t);e=p;do t=n.heap[1],n.heap[1]=n.heap[n.heap_len--],ue(n,E,1),w=n.heap[1],n.heap[--n.heap_max]=t,n.heap[--n.heap_max]=w,E[e*2]=E[t*2]+E[w*2],n.depth[e]=(n.depth[t]>=n.depth[w]?n.depth[t]:n.depth[w])+1,E[t*2+1]=E[w*2+1]=e,n.heap[1]=e++,ue(n,E,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],Re(n,b),De(E,W,n.bl_count)}function Ge(n,b,E){var N,o=-1,p,t=b[0*2+1],w=0,W=7,e=4;for(t===0&&(W=138,e=3),b[(E+1)*2+1]=65535,N=0;N<=E;N++)p=t,t=b[(N+1)*2+1],!(++w<W&&p===t)&&(w<e?n.bl_tree[p*2]+=w:p!==0?(p!==o&&n.bl_tree[p*2]++,n.bl_tree[X*2]++):w<=10?n.bl_tree[I*2]++:n.bl_tree[D*2]++,w=0,o=p,t===0?(W=138,e=3):p===t?(W=6,e=3):(W=7,e=4))}function Ke(n,b,E){var N,o=-1,p,t=b[0*2+1],w=0,W=7,e=4;for(t===0&&(W=138,e=3),N=0;N<=E;N++)if(p=t,t=b[(N+1)*2+1],!(++w<W&&p===t)){if(w<e)do ce(n,p,n.bl_tree);while(--w!==0);else p!==0?(p!==o&&(ce(n,p,n.bl_tree),w--),ce(n,X,n.bl_tree),ae(n,w-3,2)):w<=10?(ce(n,I,n.bl_tree),ae(n,w-3,3)):(ce(n,D,n.bl_tree),ae(n,w-11,7));w=0,o=p,t===0?(W=138,e=3):p===t?(W=6,e=3):(W=7,e=4)}}function Fe(n){var b;for(Ge(n,n.dyn_ltree,n.l_desc.max_code),Ge(n,n.dyn_dtree,n.d_desc.max_code),Ne(n,n.bl_desc),b=le-1;b>=3&&n.bl_tree[ne[b]*2+1]===0;b--);return n.opt_len+=3*(b+1)+5+5+4,b}function Xe(n,b,E,N){var o;for(ae(n,b-257,5),ae(n,E-1,5),ae(n,N-4,4),o=0;o<N;o++)ae(n,n.bl_tree[ne[o]*2+1],3);Ke(n,n.dyn_ltree,b-1),Ke(n,n.dyn_dtree,E-1)}function Ye(n){var b=4093624447,E;for(E=0;E<=31;E++,b>>>=1)if(b&1&&n.dyn_ltree[E*2]!==0)return S;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return u;for(E=32;E<A;E++)if(n.dyn_ltree[E*2]!==0)return u;return S}var Be=!1;function $e(n){Be||(oe(),Be=!0),n.l_desc=new de(n.dyn_ltree,ze),n.d_desc=new de(n.dyn_dtree,Ae),n.bl_desc=new de(n.bl_tree,xe),n.bi_buf=0,n.bi_valid=0,Ee(n)}function je(n,b,E,N){ae(n,(f<<1)+(N?1:0),3),Oe(n,b,E,!0)}function ke(n){ae(n,h<<1,3),ce(n,Y,j),ye(n)}function Ze(n,b,E,N){var o,p,t=0;n.level>0?(n.strm.data_type===l&&(n.strm.data_type=Ye(n)),Ne(n,n.l_desc),Ne(n,n.d_desc),t=Fe(n),o=n.opt_len+3+7>>>3,p=n.static_len+3+7>>>3,p<=o&&(o=p)):o=p=E+5,E+4<=o&&b!==-1?je(n,b,E,N):n.strategy===z||p===o?(ae(n,(h<<1)+(N?1:0),3),q(n,j,ie)):(ae(n,(a<<1)+(N?1:0),3),Xe(n,n.l_desc.max_code+1,n.d_desc.max_code+1,t+1),q(n,n.dyn_ltree,n.dyn_dtree)),Ee(n),N&&We(n)}function Qe(n,b,E){return n.pending_buf[n.d_buf+n.last_lit*2]=b>>>8&255,n.pending_buf[n.d_buf+n.last_lit*2+1]=b&255,n.pending_buf[n.l_buf+n.last_lit]=E&255,n.last_lit++,b===0?n.dyn_ltree[E*2]++:(n.matches++,b--,n.dyn_ltree[(we[E]+A+1)*2]++,n.dyn_dtree[Se(b)*2]++),n.last_lit===n.lit_bufsize-1}m._tr_init=$e,m._tr_stored_block=je,m._tr_flush_block=Ze,m._tr_tally=Qe,m._tr_align=ke},{"../utils/common":5}],12:[function(k,T,m){"use strict";function g(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}T.exports=g},{}]},{},[3])(3)})});var Pt=ft((kt,_t)=>{(function(v){if(typeof kt=="object"&&typeof _t<"u")_t.exports=v();else if(typeof define=="function"&&define.amd)define([],v);else{var y;typeof window<"u"?y=window:typeof global<"u"?y=global:typeof self<"u"?y=self:y=this,y.plantumlEncoder=v()}})(function(){var v,y,H;return function(){function k(T,m,g){function z(l,c){if(!m[l]){if(!T[l]){var f=typeof Ie=="function"&&Ie;if(!c&&f)return f(l,!0);if(S)return S(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var a=m[l]={exports:{}};T[l][0].call(a.exports,function(x){var P=T[l][1][x];return z(P||x)},a,a.exports,k,T,m,g)}return m[l].exports}for(var S=typeof Ie=="function"&&Ie,u=0;u<g.length;u++)z(g[u]);return z}return k}()({1:[function(k,T,m){"use strict";var g=k("pako/lib/inflate.js");T.exports=function(z){return g.inflateRaw(z,{to:"string"})}},{"pako/lib/inflate.js":4}],2:[function(k,T,m){"use strict";function g(S){var u=S.charCodeAt(0);return S==="_"?63:S==="-"?62:u>=97?u-61:u>=65?u-55:u>=48?u-48:"?"}function z(S){var u=g(S[0]),l=g(S[1]),c=g(S[2]),f=g(S[3]),h=u<<2|l>>4&63,a=l<<4&240|c>>2&15,x=c<<6&192|f&63;return[h,a,x]}T.exports=function(S){var u="",l=0;for(l=0;l<S.length;l+=4){var c=z(S.substring(l,l+4));u=u+String.fromCharCode(c[0]),u=u+String.fromCharCode(c[1]),u=u+String.fromCharCode(c[2])}return u}},{}],3:[function(k,T,m){"use strict";var g=k("./inflate"),z=k("./decode64");T.exports.decode=function(S){var u=z(S);return g(u)}},{"./decode64":2,"./inflate":1}],4:[function(k,T,m){"use strict";var g=k("./zlib/inflate"),z=k("./utils/common"),S=k("./utils/strings"),u=k("./zlib/constants"),l=k("./zlib/messages"),c=k("./zlib/zstream"),f=k("./zlib/gzheader"),h=Object.prototype.toString;function a(R){if(!(this instanceof a))return new a(R);this.options=z.assign({chunkSize:16384,windowBits:0,to:""},R||{});var A=this.options;A.raw&&A.windowBits>=0&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),A.windowBits>=0&&A.windowBits<16&&!(R&&R.windowBits)&&(A.windowBits+=32),A.windowBits>15&&A.windowBits<48&&(A.windowBits&15||(A.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var C=g.inflateInit2(this.strm,A.windowBits);if(C!==u.Z_OK)throw new Error(l[C]);if(this.header=new f,g.inflateGetHeader(this.strm,this.header),A.dictionary&&(typeof A.dictionary=="string"?A.dictionary=S.string2buf(A.dictionary):h.call(A.dictionary)==="[object ArrayBuffer]"&&(A.dictionary=new Uint8Array(A.dictionary)),A.raw&&(C=g.inflateSetDictionary(this.strm,A.dictionary),C!==u.Z_OK)))throw new Error(l[C])}a.prototype.push=function(R,A){var C=this.strm,K=this.options.chunkSize,le=this.options.dictionary,L,Z,$,M,Y,X=!1;if(this.ended)return!1;Z=A===~~A?A:A===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof R=="string"?C.input=S.binstring2buf(R):h.call(R)==="[object ArrayBuffer]"?C.input=new Uint8Array(R):C.input=R,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new z.Buf8(K),C.next_out=0,C.avail_out=K),L=g.inflate(C,u.Z_NO_FLUSH),L===u.Z_NEED_DICT&&le&&(L=g.inflateSetDictionary(this.strm,le)),L===u.Z_BUF_ERROR&&X===!0&&(L=u.Z_OK,X=!1),L!==u.Z_STREAM_END&&L!==u.Z_OK)return this.onEnd(L),this.ended=!0,!1;C.next_out&&(C.avail_out===0||L===u.Z_STREAM_END||C.avail_in===0&&(Z===u.Z_FINISH||Z===u.Z_SYNC_FLUSH))&&(this.options.to==="string"?($=S.utf8border(C.output,C.next_out),M=C.next_out-$,Y=S.buf2string(C.output,$),C.next_out=M,C.avail_out=K-M,M&&z.arraySet(C.output,C.output,$,M,0),this.onData(Y)):this.onData(z.shrinkBuf(C.output,C.next_out))),C.avail_in===0&&C.avail_out===0&&(X=!0)}while((C.avail_in>0||C.avail_out===0)&&L!==u.Z_STREAM_END);return L===u.Z_STREAM_END&&(Z=u.Z_FINISH),Z===u.Z_FINISH?(L=g.inflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===u.Z_OK):(Z===u.Z_SYNC_FLUSH&&(this.onEnd(u.Z_OK),C.avail_out=0),!0)},a.prototype.onData=function(R){this.chunks.push(R)},a.prototype.onEnd=function(R){R===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=z.flattenChunks(this.chunks)),this.chunks=[],this.err=R,this.msg=this.strm.msg};function x(R,A){var C=new a(A);if(C.push(R,!0),C.err)throw C.msg||l[C.err];return C.result}function P(R,A){return A=A||{},A.raw=!0,x(R,A)}m.Inflate=a,m.inflate=x,m.inflateRaw=P,m.ungzip=x},{"./utils/common":5,"./utils/strings":6,"./zlib/constants":8,"./zlib/gzheader":10,"./zlib/inflate":12,"./zlib/messages":14,"./zlib/zstream":15}],5:[function(k,T,m){"use strict";var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function z(l,c){return Object.prototype.hasOwnProperty.call(l,c)}m.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)z(f,h)&&(l[h]=f[h])}}return l},m.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var S={arraySet:function(l,c,f,h,a){if(c.subarray&&l.subarray){l.set(c.subarray(f,f+h),a);return}for(var x=0;x<h;x++)l[a+x]=c[f+x]},flattenChunks:function(l){var c,f,h,a,x,P;for(h=0,c=0,f=l.length;c<f;c++)h+=l[c].length;for(P=new Uint8Array(h),a=0,c=0,f=l.length;c<f;c++)x=l[c],P.set(x,a),a+=x.length;return P}},u={arraySet:function(l,c,f,h,a){for(var x=0;x<h;x++)l[a+x]=c[f+x]},flattenChunks:function(l){return[].concat.apply([],l)}};m.setTyped=function(l){l?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,S)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,u))},m.setTyped(g)},{}],6:[function(k,T,m){"use strict";var g=k("./common"),z=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch{z=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{S=!1}for(var u=new g.Buf8(256),l=0;l<256;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,m.string2buf=function(f){var h,a,x,P,R,A=f.length,C=0;for(P=0;P<A;P++)a=f.charCodeAt(P),(a&64512)===55296&&P+1<A&&(x=f.charCodeAt(P+1),(x&64512)===56320&&(a=65536+(a-55296<<10)+(x-56320),P++)),C+=a<128?1:a<2048?2:a<65536?3:4;for(h=new g.Buf8(C),R=0,P=0;R<C;P++)a=f.charCodeAt(P),(a&64512)===55296&&P+1<A&&(x=f.charCodeAt(P+1),(x&64512)===56320&&(a=65536+(a-55296<<10)+(x-56320),P++)),a<128?h[R++]=a:a<2048?(h[R++]=192|a>>>6,h[R++]=128|a&63):a<65536?(h[R++]=224|a>>>12,h[R++]=128|a>>>6&63,h[R++]=128|a&63):(h[R++]=240|a>>>18,h[R++]=128|a>>>12&63,h[R++]=128|a>>>6&63,h[R++]=128|a&63);return h};function c(f,h){if(h<65534&&(f.subarray&&S||!f.subarray&&z))return String.fromCharCode.apply(null,g.shrinkBuf(f,h));for(var a="",x=0;x<h;x++)a+=String.fromCharCode(f[x]);return a}m.buf2binstring=function(f){return c(f,f.length)},m.binstring2buf=function(f){for(var h=new g.Buf8(f.length),a=0,x=h.length;a<x;a++)h[a]=f.charCodeAt(a);return h},m.buf2string=function(f,h){var a,x,P,R,A=h||f.length,C=new Array(A*2);for(x=0,a=0;a<A;){if(P=f[a++],P<128){C[x++]=P;continue}if(R=u[P],R>4){C[x++]=65533,a+=R-1;continue}for(P&=R===2?31:R===3?15:7;R>1&&a<A;)P=P<<6|f[a++]&63,R--;if(R>1){C[x++]=65533;continue}P<65536?C[x++]=P:(P-=65536,C[x++]=55296|P>>10&1023,C[x++]=56320|P&1023)}return c(C,x)},m.utf8border=function(f,h){var a;for(h=h||f.length,h>f.length&&(h=f.length),a=h-1;a>=0&&(f[a]&192)===128;)a--;return a<0||a===0?h:a+u[f[a]]>h?a:h}},{"./common":5}],7:[function(k,T,m){"use strict";function g(z,S,u,l){for(var c=z&65535|0,f=z>>>16&65535|0,h=0;u!==0;){h=u>2e3?2e3:u,u-=h;do c=c+S[l++]|0,f=f+c|0;while(--h);c%=65521,f%=65521}return c|f<<16|0}T.exports=g},{}],8:[function(k,T,m){"use strict";T.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],9:[function(k,T,m){"use strict";function g(){for(var u,l=[],c=0;c<256;c++){u=c;for(var f=0;f<8;f++)u=u&1?3988292384^u>>>1:u>>>1;l[c]=u}return l}var z=g();function S(u,l,c,f){var h=z,a=f+c;u^=-1;for(var x=f;x<a;x++)u=u>>>8^h[(u^l[x])&255];return u^-1}T.exports=S},{}],10:[function(k,T,m){"use strict";function g(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}T.exports=g},{}],11:[function(k,T,m){"use strict";var g=30,z=12;T.exports=function(u,l){var c,f,h,a,x,P,R,A,C,K,le,L,Z,$,M,Y,X,I,D,Q,te,V,ne,fe,j;c=u.state,f=u.next_in,fe=u.input,h=f+(u.avail_in-5),a=u.next_out,j=u.output,x=a-(l-u.avail_out),P=a+(u.avail_out-257),R=c.dmax,A=c.wsize,C=c.whave,K=c.wnext,le=c.window,L=c.hold,Z=c.bits,$=c.lencode,M=c.distcode,Y=(1<<c.lenbits)-1,X=(1<<c.distbits)-1;e:do{Z<15&&(L+=fe[f++]<<Z,Z+=8,L+=fe[f++]<<Z,Z+=8),I=$[L&Y];t:for(;;){if(D=I>>>24,L>>>=D,Z-=D,D=I>>>16&255,D===0)j[a++]=I&65535;else if(D&16){Q=I&65535,D&=15,D&&(Z<D&&(L+=fe[f++]<<Z,Z+=8),Q+=L&(1<<D)-1,L>>>=D,Z-=D),Z<15&&(L+=fe[f++]<<Z,Z+=8,L+=fe[f++]<<Z,Z+=8),I=M[L&X];r:for(;;){if(D=I>>>24,L>>>=D,Z-=D,D=I>>>16&255,D&16){if(te=I&65535,D&=15,Z<D&&(L+=fe[f++]<<Z,Z+=8,Z<D&&(L+=fe[f++]<<Z,Z+=8)),te+=L&(1<<D)-1,te>R){u.msg="invalid distance too far back",c.mode=g;break e}if(L>>>=D,Z-=D,D=a-x,te>D){if(D=te-D,D>C&&c.sane){u.msg="invalid distance too far back",c.mode=g;break e}if(V=0,ne=le,K===0){if(V+=A-D,D<Q){Q-=D;do j[a++]=le[V++];while(--D);V=a-te,ne=j}}else if(K<D){if(V+=A+K-D,D-=K,D<Q){Q-=D;do j[a++]=le[V++];while(--D);if(V=0,K<Q){D=K,Q-=D;do j[a++]=le[V++];while(--D);V=a-te,ne=j}}}else if(V+=K-D,D<Q){Q-=D;do j[a++]=le[V++];while(--D);V=a-te,ne=j}for(;Q>2;)j[a++]=ne[V++],j[a++]=ne[V++],j[a++]=ne[V++],Q-=3;Q&&(j[a++]=ne[V++],Q>1&&(j[a++]=ne[V++]))}else{V=a-te;do j[a++]=j[V++],j[a++]=j[V++],j[a++]=j[V++],Q-=3;while(Q>2);Q&&(j[a++]=j[V++],Q>1&&(j[a++]=j[V++]))}}else if(D&64){u.msg="invalid distance code",c.mode=g;break e}else{I=M[(I&65535)+(L&(1<<D)-1)];continue r}break}}else if(D&64)if(D&32){c.mode=z;break e}else{u.msg="invalid literal/length code",c.mode=g;break e}else{I=$[(I&65535)+(L&(1<<D)-1)];continue t}break}}while(f<h&&a<P);Q=Z>>3,f-=Q,Z-=Q<<3,L&=(1<<Z)-1,u.next_in=f,u.next_out=a,u.avail_in=f<h?5+(h-f):5-(f-h),u.avail_out=a<P?257+(P-a):257-(a-P),c.hold=L,c.bits=Z}},{}],12:[function(k,T,m){"use strict";var g=k("../utils/common"),z=k("./adler32"),S=k("./crc32"),u=k("./inffast"),l=k("./inftrees"),c=0,f=1,h=2,a=4,x=5,P=6,R=0,A=1,C=2,K=-2,le=-3,L=-4,Z=-5,$=8,M=1,Y=2,X=3,I=4,D=5,Q=6,te=7,V=8,ne=9,fe=10,j=11,ie=12,_e=13,we=14,G=15,ve=16,se=17,ze=18,Ae=19,xe=20,de=21,Se=22,me=23,ae=24,ce=25,re=26,ye=27,Re=28,De=29,oe=30,Ee=31,We=32,Oe=852,Ce=592,ue=15,q=ue;function Ne(o){return(o>>>24&255)+(o>>>8&65280)+((o&65280)<<8)+((o&255)<<24)}function Ge(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ke(o){var p;return!o||!o.state?K:(p=o.state,o.total_in=o.total_out=p.total=0,o.msg="",p.wrap&&(o.adler=p.wrap&1),p.mode=M,p.last=0,p.havedict=0,p.dmax=32768,p.head=null,p.hold=0,p.bits=0,p.lencode=p.lendyn=new g.Buf32(Oe),p.distcode=p.distdyn=new g.Buf32(Ce),p.sane=1,p.back=-1,R)}function Fe(o){var p;return!o||!o.state?K:(p=o.state,p.wsize=0,p.whave=0,p.wnext=0,Ke(o))}function Xe(o,p){var t,w;return!o||!o.state||(w=o.state,p<0?(t=0,p=-p):(t=(p>>4)+1,p<48&&(p&=15)),p&&(p<8||p>15))?K:(w.window!==null&&w.wbits!==p&&(w.window=null),w.wrap=t,w.wbits=p,Fe(o))}function Ye(o,p){var t,w;return o?(w=new Ge,o.state=w,w.window=null,t=Xe(o,p),t!==R&&(o.state=null),t):K}function Be(o){return Ye(o,q)}var $e=!0,je,ke;function Ze(o){if($e){var p;for(je=new g.Buf32(512),ke=new g.Buf32(32),p=0;p<144;)o.lens[p++]=8;for(;p<256;)o.lens[p++]=9;for(;p<280;)o.lens[p++]=7;for(;p<288;)o.lens[p++]=8;for(l(f,o.lens,0,288,je,0,o.work,{bits:9}),p=0;p<32;)o.lens[p++]=5;l(h,o.lens,0,32,ke,0,o.work,{bits:5}),$e=!1}o.lencode=je,o.lenbits=9,o.distcode=ke,o.distbits=5}function Qe(o,p,t,w){var W,e=o.state;return e.window===null&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new g.Buf8(e.wsize)),w>=e.wsize?(g.arraySet(e.window,p,t-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(W=e.wsize-e.wnext,W>w&&(W=w),g.arraySet(e.window,p,t-w,W,e.wnext),w-=W,w?(g.arraySet(e.window,p,t-w,w,0),e.wnext=w,e.whave=e.wsize):(e.wnext+=W,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=W))),0}function n(o,p){var t,w,W,e,d,_,r,i,s,B,O,F,J,Ue,he=0,ee,ge,Pe,Te,Je,et,pe,Me,be=new g.Buf8(4),He,Le,vt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!o||!o.state||!o.output||!o.input&&o.avail_in!==0)return K;t=o.state,t.mode===ie&&(t.mode=_e),d=o.next_out,W=o.output,r=o.avail_out,e=o.next_in,w=o.input,_=o.avail_in,i=t.hold,s=t.bits,B=_,O=r,Me=R;e:for(;;)switch(t.mode){case M:if(t.wrap===0){t.mode=_e;break}for(;s<16;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(t.wrap&2&&i===35615){t.check=0,be[0]=i&255,be[1]=i>>>8&255,t.check=S(t.check,be,2,0),i=0,s=0,t.mode=Y;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((i&255)<<8)+(i>>8))%31){o.msg="incorrect header check",t.mode=oe;break}if((i&15)!==$){o.msg="unknown compression method",t.mode=oe;break}if(i>>>=4,s-=4,pe=(i&15)+8,t.wbits===0)t.wbits=pe;else if(pe>t.wbits){o.msg="invalid window size",t.mode=oe;break}t.dmax=1<<pe,o.adler=t.check=1,t.mode=i&512?fe:ie,i=0,s=0;break;case Y:for(;s<16;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(t.flags=i,(t.flags&255)!==$){o.msg="unknown compression method",t.mode=oe;break}if(t.flags&57344){o.msg="unknown header flags set",t.mode=oe;break}t.head&&(t.head.text=i>>8&1),t.flags&512&&(be[0]=i&255,be[1]=i>>>8&255,t.check=S(t.check,be,2,0)),i=0,s=0,t.mode=X;case X:for(;s<32;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}t.head&&(t.head.time=i),t.flags&512&&(be[0]=i&255,be[1]=i>>>8&255,be[2]=i>>>16&255,be[3]=i>>>24&255,t.check=S(t.check,be,4,0)),i=0,s=0,t.mode=I;case I:for(;s<16;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}t.head&&(t.head.xflags=i&255,t.head.os=i>>8),t.flags&512&&(be[0]=i&255,be[1]=i>>>8&255,t.check=S(t.check,be,2,0)),i=0,s=0,t.mode=D;case D:if(t.flags&1024){for(;s<16;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}t.length=i,t.head&&(t.head.extra_len=i),t.flags&512&&(be[0]=i&255,be[1]=i>>>8&255,t.check=S(t.check,be,2,0)),i=0,s=0}else t.head&&(t.head.extra=null);t.mode=Q;case Q:if(t.flags&1024&&(F=t.length,F>_&&(F=_),F&&(t.head&&(pe=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),g.arraySet(t.head.extra,w,e,F,pe)),t.flags&512&&(t.check=S(t.check,w,F,e)),_-=F,e+=F,t.length-=F),t.length))break e;t.length=0,t.mode=te;case te:if(t.flags&2048){if(_===0)break e;F=0;do pe=w[e+F++],t.head&&pe&&t.length<65536&&(t.head.name+=String.fromCharCode(pe));while(pe&&F<_);if(t.flags&512&&(t.check=S(t.check,w,F,e)),_-=F,e+=F,pe)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=V;case V:if(t.flags&4096){if(_===0)break e;F=0;do pe=w[e+F++],t.head&&pe&&t.length<65536&&(t.head.comment+=String.fromCharCode(pe));while(pe&&F<_);if(t.flags&512&&(t.check=S(t.check,w,F,e)),_-=F,e+=F,pe)break e}else t.head&&(t.head.comment=null);t.mode=ne;case ne:if(t.flags&512){for(;s<16;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(i!==(t.check&65535)){o.msg="header crc mismatch",t.mode=oe;break}i=0,s=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),o.adler=t.check=0,t.mode=ie;break;case fe:for(;s<32;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}o.adler=t.check=Ne(i),i=0,s=0,t.mode=j;case j:if(t.havedict===0)return o.next_out=d,o.avail_out=r,o.next_in=e,o.avail_in=_,t.hold=i,t.bits=s,C;o.adler=t.check=1,t.mode=ie;case ie:if(p===x||p===P)break e;case _e:if(t.last){i>>>=s&7,s-=s&7,t.mode=ye;break}for(;s<3;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}switch(t.last=i&1,i>>>=1,s-=1,i&3){case 0:t.mode=we;break;case 1:if(Ze(t),t.mode=xe,p===P){i>>>=2,s-=2;break e}break;case 2:t.mode=se;break;case 3:o.msg="invalid block type",t.mode=oe}i>>>=2,s-=2;break;case we:for(i>>>=s&7,s-=s&7;s<32;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if((i&65535)!==(i>>>16^65535)){o.msg="invalid stored block lengths",t.mode=oe;break}if(t.length=i&65535,i=0,s=0,t.mode=G,p===P)break e;case G:t.mode=ve;case ve:if(F=t.length,F){if(F>_&&(F=_),F>r&&(F=r),F===0)break e;g.arraySet(W,w,e,F,d),_-=F,e+=F,r-=F,d+=F,t.length-=F;break}t.mode=ie;break;case se:for(;s<14;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(t.nlen=(i&31)+257,i>>>=5,s-=5,t.ndist=(i&31)+1,i>>>=5,s-=5,t.ncode=(i&15)+4,i>>>=4,s-=4,t.nlen>286||t.ndist>30){o.msg="too many length or distance symbols",t.mode=oe;break}t.have=0,t.mode=ze;case ze:for(;t.have<t.ncode;){for(;s<3;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}t.lens[vt[t.have++]]=i&7,i>>>=3,s-=3}for(;t.have<19;)t.lens[vt[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,He={bits:t.lenbits},Me=l(c,t.lens,0,19,t.lencode,0,t.work,He),t.lenbits=He.bits,Me){o.msg="invalid code lengths set",t.mode=oe;break}t.have=0,t.mode=Ae;case Ae:for(;t.have<t.nlen+t.ndist;){for(;he=t.lencode[i&(1<<t.lenbits)-1],ee=he>>>24,ge=he>>>16&255,Pe=he&65535,!(ee<=s);){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(Pe<16)i>>>=ee,s-=ee,t.lens[t.have++]=Pe;else{if(Pe===16){for(Le=ee+2;s<Le;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(i>>>=ee,s-=ee,t.have===0){o.msg="invalid bit length repeat",t.mode=oe;break}pe=t.lens[t.have-1],F=3+(i&3),i>>>=2,s-=2}else if(Pe===17){for(Le=ee+3;s<Le;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}i>>>=ee,s-=ee,pe=0,F=3+(i&7),i>>>=3,s-=3}else{for(Le=ee+7;s<Le;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}i>>>=ee,s-=ee,pe=0,F=11+(i&127),i>>>=7,s-=7}if(t.have+F>t.nlen+t.ndist){o.msg="invalid bit length repeat",t.mode=oe;break}for(;F--;)t.lens[t.have++]=pe}}if(t.mode===oe)break;if(t.lens[256]===0){o.msg="invalid code -- missing end-of-block",t.mode=oe;break}if(t.lenbits=9,He={bits:t.lenbits},Me=l(f,t.lens,0,t.nlen,t.lencode,0,t.work,He),t.lenbits=He.bits,Me){o.msg="invalid literal/lengths set",t.mode=oe;break}if(t.distbits=6,t.distcode=t.distdyn,He={bits:t.distbits},Me=l(h,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,He),t.distbits=He.bits,Me){o.msg="invalid distances set",t.mode=oe;break}if(t.mode=xe,p===P)break e;case xe:t.mode=de;case de:if(_>=6&&r>=258){o.next_out=d,o.avail_out=r,o.next_in=e,o.avail_in=_,t.hold=i,t.bits=s,u(o,O),d=o.next_out,W=o.output,r=o.avail_out,e=o.next_in,w=o.input,_=o.avail_in,i=t.hold,s=t.bits,t.mode===ie&&(t.back=-1);break}for(t.back=0;he=t.lencode[i&(1<<t.lenbits)-1],ee=he>>>24,ge=he>>>16&255,Pe=he&65535,!(ee<=s);){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(ge&&!(ge&240)){for(Te=ee,Je=ge,et=Pe;he=t.lencode[et+((i&(1<<Te+Je)-1)>>Te)],ee=he>>>24,ge=he>>>16&255,Pe=he&65535,!(Te+ee<=s);){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}i>>>=Te,s-=Te,t.back+=Te}if(i>>>=ee,s-=ee,t.back+=ee,t.length=Pe,ge===0){t.mode=re;break}if(ge&32){t.back=-1,t.mode=ie;break}if(ge&64){o.msg="invalid literal/length code",t.mode=oe;break}t.extra=ge&15,t.mode=Se;case Se:if(t.extra){for(Le=t.extra;s<Le;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}t.length+=i&(1<<t.extra)-1,i>>>=t.extra,s-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=me;case me:for(;he=t.distcode[i&(1<<t.distbits)-1],ee=he>>>24,ge=he>>>16&255,Pe=he&65535,!(ee<=s);){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(!(ge&240)){for(Te=ee,Je=ge,et=Pe;he=t.distcode[et+((i&(1<<Te+Je)-1)>>Te)],ee=he>>>24,ge=he>>>16&255,Pe=he&65535,!(Te+ee<=s);){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}i>>>=Te,s-=Te,t.back+=Te}if(i>>>=ee,s-=ee,t.back+=ee,ge&64){o.msg="invalid distance code",t.mode=oe;break}t.offset=Pe,t.extra=ge&15,t.mode=ae;case ae:if(t.extra){for(Le=t.extra;s<Le;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}t.offset+=i&(1<<t.extra)-1,i>>>=t.extra,s-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){o.msg="invalid distance too far back",t.mode=oe;break}t.mode=ce;case ce:if(r===0)break e;if(F=O-r,t.offset>F){if(F=t.offset-F,F>t.whave&&t.sane){o.msg="invalid distance too far back",t.mode=oe;break}F>t.wnext?(F-=t.wnext,J=t.wsize-F):J=t.wnext-F,F>t.length&&(F=t.length),Ue=t.window}else Ue=W,J=d-t.offset,F=t.length;F>r&&(F=r),r-=F,t.length-=F;do W[d++]=Ue[J++];while(--F);t.length===0&&(t.mode=de);break;case re:if(r===0)break e;W[d++]=t.length,r--,t.mode=de;break;case ye:if(t.wrap){for(;s<32;){if(_===0)break e;_--,i|=w[e++]<<s,s+=8}if(O-=r,o.total_out+=O,t.total+=O,O&&(o.adler=t.check=t.flags?S(t.check,W,O,d-O):z(t.check,W,O,d-O)),O=r,(t.flags?i:Ne(i))!==t.check){o.msg="incorrect data check",t.mode=oe;break}i=0,s=0}t.mode=Re;case Re:if(t.wrap&&t.flags){for(;s<32;){if(_===0)break e;_--,i+=w[e++]<<s,s+=8}if(i!==(t.total&4294967295)){o.msg="incorrect length check",t.mode=oe;break}i=0,s=0}t.mode=De;case De:Me=A;break e;case oe:Me=le;break e;case Ee:return L;case We:default:return K}return o.next_out=d,o.avail_out=r,o.next_in=e,o.avail_in=_,t.hold=i,t.bits=s,(t.wsize||O!==o.avail_out&&t.mode<oe&&(t.mode<ye||p!==a))&&Qe(o,o.output,o.next_out,O-o.avail_out)?(t.mode=Ee,L):(B-=o.avail_in,O-=o.avail_out,o.total_in+=B,o.total_out+=O,t.total+=O,t.wrap&&O&&(o.adler=t.check=t.flags?S(t.check,W,O,o.next_out-O):z(t.check,W,O,o.next_out-O)),o.data_type=t.bits+(t.last?64:0)+(t.mode===ie?128:0)+(t.mode===xe||t.mode===G?256:0),(B===0&&O===0||p===a)&&Me===R&&(Me=Z),Me)}function b(o){if(!o||!o.state)return K;var p=o.state;return p.window&&(p.window=null),o.state=null,R}function E(o,p){var t;return!o||!o.state||(t=o.state,!(t.wrap&2))?K:(t.head=p,p.done=!1,R)}function N(o,p){var t=p.length,w,W,e;return!o||!o.state||(w=o.state,w.wrap!==0&&w.mode!==j)?K:w.mode===j&&(W=1,W=z(W,p,t,0),W!==w.check)?le:(e=Qe(o,p,t,t),e?(w.mode=Ee,L):(w.havedict=1,R))}m.inflateReset=Fe,m.inflateReset2=Xe,m.inflateResetKeep=Ke,m.inflateInit=Be,m.inflateInit2=Ye,m.inflate=n,m.inflateEnd=b,m.inflateGetHeader=E,m.inflateSetDictionary=N,m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":5,"./adler32":7,"./crc32":9,"./inffast":11,"./inftrees":13}],13:[function(k,T,m){"use strict";var g=k("../utils/common"),z=15,S=852,u=592,l=0,c=1,f=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];T.exports=function(A,C,K,le,L,Z,$,M){var Y=M.bits,X=0,I=0,D=0,Q=0,te=0,V=0,ne=0,fe=0,j=0,ie=0,_e,we,G,ve,se,ze=null,Ae=0,xe,de=new g.Buf16(z+1),Se=new g.Buf16(z+1),me=null,ae=0,ce,re,ye;for(X=0;X<=z;X++)de[X]=0;for(I=0;I<le;I++)de[C[K+I]]++;for(te=Y,Q=z;Q>=1&&de[Q]===0;Q--);if(te>Q&&(te=Q),Q===0)return L[Z++]=1<<24|64<<16|0,L[Z++]=1<<24|64<<16|0,M.bits=1,0;for(D=1;D<Q&&de[D]===0;D++);for(te<D&&(te=D),fe=1,X=1;X<=z;X++)if(fe<<=1,fe-=de[X],fe<0)return-1;if(fe>0&&(A===l||Q!==1))return-1;for(Se[1]=0,X=1;X<z;X++)Se[X+1]=Se[X]+de[X];for(I=0;I<le;I++)C[K+I]!==0&&($[Se[C[K+I]]++]=I);if(A===l?(ze=me=$,xe=19):A===c?(ze=h,Ae-=257,me=a,ae-=257,xe=256):(ze=x,me=P,xe=-1),ie=0,I=0,X=D,se=Z,V=te,ne=0,G=-1,j=1<<te,ve=j-1,A===c&&j>S||A===f&&j>u)return 1;for(;;){ce=X-ne,$[I]<xe?(re=0,ye=$[I]):$[I]>xe?(re=me[ae+$[I]],ye=ze[Ae+$[I]]):(re=96,ye=0),_e=1<<X-ne,we=1<<V,D=we;do we-=_e,L[se+(ie>>ne)+we]=ce<<24|re<<16|ye|0;while(we!==0);for(_e=1<<X-1;ie&_e;)_e>>=1;if(_e!==0?(ie&=_e-1,ie+=_e):ie=0,I++,--de[X]===0){if(X===Q)break;X=C[K+$[I]]}if(X>te&&(ie&ve)!==G){for(ne===0&&(ne=te),se+=D,V=X-ne,fe=1<<V;V+ne<Q&&(fe-=de[V+ne],!(fe<=0));)V++,fe<<=1;if(j+=1<<V,A===c&&j>S||A===f&&j>u)return 1;G=ie&ve,L[G]=te<<24|V<<16|se-Z|0}}return ie!==0&&(L[se+ie]=X-ne<<24|64<<16|0),M.bits=te,0}},{"../utils/common":5}],14:[function(k,T,m){"use strict";T.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],15:[function(k,T,m){"use strict";function g(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}T.exports=g},{}]},{},[3])(3)})});var Et=ft((xn,St)=>{St.exports={encode:yt().encode,decode:Pt().decode}});var qe=v=>{throw new Error("Not initialized yet")},ut=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var st=new Map,lt=0;ut&&(globalThis.syscall=async(v,...y)=>await new Promise((H,k)=>{lt++,st.set(lt,{resolve:H,reject:k}),qe({type:"sys",id:lt,name:v,args:y})}));function pt(v,y,H){ut&&(qe=H,self.addEventListener("message",k=>{(async()=>{let T=k.data;switch(T.type){case"inv":{let m=v[T.name];if(!m)throw new Error(`Function not loaded: ${T.name}`);try{let g=await Promise.resolve(m(...T.args||[]));qe({type:"invr",id:T.id,result:g})}catch(g){console.error("An exception was thrown as a result of invoking function",T.name,"error:",g.message),qe({type:"invr",id:T.id,error:g.message})}}break;case"sysr":{let m=T.id,g=st.get(m);if(!g)throw Error("Invalid request id");st.delete(m),T.error?g.reject(new Error(T.error)):g.resolve(T.result)}break}})().catch(console.error)}),qe({type:"manifest",manifest:y}))}function Zt(v){let y=atob(v),H=y.length,k=new Uint8Array(H);for(let T=0;T<H;T++)k[T]=y.charCodeAt(T);return k}function gt(v){typeof v=="string"&&(v=new TextEncoder().encode(v));let y="",H=v.byteLength;for(let k=0;k<H;k++)y+=String.fromCharCode(v[k]);return btoa(y)}async function Lt(v,y){if(typeof v!="string"){let H=new Uint8Array(await v.arrayBuffer()),k=H.length>0?gt(H):void 0;y={method:v.method,headers:Object.fromEntries(v.headers.entries()),base64Body:k},v=v.url}return syscall("sandboxFetch.fetch",v,y)}globalThis.nativeFetch=globalThis.fetch;function It(){globalThis.fetch=async function(v,y){let H=y&&y.body?gt(new Uint8Array(await new Response(y.body).arrayBuffer())):void 0,k=await Lt(v,y&&{method:y.method,headers:y.headers,base64Body:H});return new Response(k.base64Body?Zt(k.base64Body):null,{status:k.status,headers:k.headers})}}ut&&It();typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function U(v,...y){return globalThis.syscall(v,...y)}var tt={};Ve(tt,{parseMarkdown:()=>Ht,renderParseTree:()=>Kt});function Ht(v){return U("markdown.parseMarkdown",v)}function Kt(v){return U("markdown.renderParseTree",v)}var rt={};Ve(rt,{deleteAttachment:()=>er,deleteFile:()=>ar,deletePage:()=>Xt,fileExists:()=>or,getAttachmentMeta:()=>Vt,getFileMeta:()=>nr,getPageMeta:()=>jt,listAttachments:()=>Qt,listFiles:()=>tr,listPages:()=>Yt,listPlugs:()=>$t,readAttachment:()=>qt,readFile:()=>rr,readPage:()=>Wt,writeAttachment:()=>Jt,writeFile:()=>ir,writePage:()=>Gt});function Yt(){return U("space.listPages")}function jt(v){return U("space.getPageMeta",v)}function Wt(v){return U("space.readPage",v)}function Gt(v,y){return U("space.writePage",v,y)}function Xt(v){return U("space.deletePage",v)}function $t(){return U("space.listPlugs")}function Qt(){return U("space.listAttachments")}function Vt(v){return U("space.getAttachmentMeta",v)}function qt(v){return U("space.readAttachment",v)}function Jt(v,y){return U("space.writeAttachment",v,y)}function er(v){return U("space.deleteAttachment",v)}function tr(){return U("space.listFiles")}function rr(v){return U("space.readFile",v)}function nr(v){return U("space.getFileMeta",v)}function ir(v,y){return U("space.writeFile",v,y)}function ar(v){return U("space.deleteFile",v)}function or(v){return U("space.fileExists",v)}var nt={};Ve(nt,{applyAttributeExtractors:()=>cr,getEnv:()=>pr,getMode:()=>gr,getSpaceConfig:()=>hr,getVersion:()=>mr,invokeCommand:()=>lr,invokeFunction:()=>fr,invokeSpaceFunction:()=>dr,listCommands:()=>sr,listSyscalls:()=>ur,reloadConfig:()=>vr,reloadPlugs:()=>_r});function fr(v,...y){return U("system.invokeFunction",v,...y)}function lr(v,y){return U("system.invokeCommand",v,y)}function sr(){return U("system.listCommands")}function ur(){return U("system.listSyscalls")}function dr(v,...y){return U("system.invokeSpaceFunction",v,...y)}function cr(v,y,H){return U("system.applyAttributeExtractors",v,y,H)}async function hr(v,y){return await U("system.getSpaceConfig",v)??y}function _r(){return U("system.reloadPlugs")}function vr(){return U("system.reloadConfig")}function pr(){return U("system.getEnv")}function gr(){return U("system.getMode")}function mr(){return U("system.getVersion")}var it={};Ve(it,{run:()=>Tr});function Tr(v,y){return U("shell.run",v,y)}var at={};Ve(at,{parse:()=>Ar,stringify:()=>Cr});function Ar(v){return U("yaml.parse",v)}function Cr(v){return U("yaml.stringify",v)}function dt(v,y){if(y(v))return[v];let H=[];if(v.children)for(let k of v.children)H=[...H,...dt(k,y)];return H}function ct(v,y){return dt(v,H=>H.type===y)[0]}function mt(v,y){dt(v,y)}async function Nr(v,y){let H=await rt.readPage(v),k=await tt.parseMarkdown(H),T;return mt(k,m=>{if(m.type!=="FencedCode")return!1;let g=ct(m,"CodeInfo");if(y&&!g||y&&!y.includes(g.children[0].text))return!1;let z=ct(m,"CodeText");return z?(T=z.children[0].text,!0):!1}),T}async function xt(v,y=["yaml"]){let H=await Nr(v,y);if(H!==void 0)try{return at.parse(H)}catch(k){throw console.error("YAML Page parser error",k),new Error(`YAML Error: ${k.message}`)}}async function bt(v,y){try{return await nt.getSpaceConfig(v)??y}catch{try{let k=(await xt("SETTINGS")||{})[v];return k===void 0?y:k}catch(H){if(H.message==="Not found")return y;throw H}}}var Tt=Bt(Et());async function Fr(v,y){try{let H=btoa(y),{stdout:k,stderr:T}=await it.run(v,[H]);return console.log(T),k}catch{console.error("PUML generation failed")}return""}async function Mr(v,y){try{var H=Tt.default.encode(y),k=v+"/plantuml/svg/"+H;let T=await fetch(k);if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);return await T.text()}catch(T){console.error("PUML generation failed",T)}return""}async function At(v){let y=await bt("plantuml"),H=v;return"serverurl"in y?H=await Mr(y.serverurl,v):"generator"in y?H=await Fr(y.generator,v):console.error("silverbullet-plantuml: neither serverurl nor generator configured"),y.serverurl,{html:`<pre id="plantuml">${H}</pre>`,script:`
    document.addEventListener("click", () => {
      api({type: "blur"});
    });
    `}}var Ct={plantumlWidget:At},zt={name:"plantuml",version:.1,imports:["https://get.silverbullet.md/global.plug.json"],requiredPermissions:["shell","fetch"],functions:{plantumlWidget:{path:"./plantuml.ts:widget",codeWidget:"plantuml"}},assets:{}},Tn={manifest:zt,functionMapping:Ct};pt(Ct,zt,self.postMessage);export{Tn as plug};
